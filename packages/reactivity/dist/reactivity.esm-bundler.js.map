{"version":3,"file":"reactivity.esm-bundler.js","sources":["../../shared/src/index.ts","../src/effect.ts","../src/baseHandlers.ts","../src/reactive.ts","../src/computed.ts"],"sourcesContent":["\nexport const isObject = (value) => typeof value == 'object' && value !== null;\nexport const extend = Object.assign\nexport const isArray = Array.isArray\nexport const isFunction = (value) => typeof value == 'function'\nexport const isNumber = (value) => typeof value == 'number'\nexport const isString = (value) => typeof value == 'string'\nexport const isIntegerKey = (key) => parseInt(key) + '' === key\nlet hasOwnpRroperty = Object.prototype.hasOwnProperty;\nexport const hasOwn = (target,key) => hasOwnpRroperty.call(target, key)\nexport const hasChanged = (oldValue, value) => oldValue != value\nexport * from './shapeFlags'\n// export const\n// export const\n","import { isArray, isIntegerKey } from \"@vue/shared\"\nimport { TriggerOrTyps } from \"./operators\"\n\n// 通过track去收集所有依赖\n// trigger 去触发effect\nexport function effect(fn,options:any = {}) {\n\tconst effect = createReactiveEffect(fn,options)\n\tif(!options.lazy){\n\t\tconsole.log('默认执行')\n\t\teffect()// effect默认会先执行一次\n\t}\n\n\treturn effect\n}\n\nlet uid = 0\nlet activeEffect //用于存储当前effect\nconst effectStack = []\nfunction createReactiveEffect(fn,options){\n\tconst effect = function reactiveEffect() {\n\t\t// console.log('todo...')\n\t\tif(!effectStack.includes(effect)){\n\t\t\ttry {\n\t\t\t\teffectStack.push(effect)\n\t\t\t\tactiveEffect = effect\n\t\t\t\treturn fn()// 函数执行 会执行get方法\n\t\t\t} finally {\n\t\t\t\teffectStack.pop()\n\t\t\t\tactiveEffect = effectStack[effectStack.length - 1]\n\t\t\t}\n\t\t}\n\t\t\n\t}\n\teffect.id = uid++ //加id用于区分effect\n\teffect._isEffect = true // 标识这是一个响应式的effect\n\teffect.raw = fn // 保存effect对应的原函数\n\teffect.options = options // 在effect上保存用户的属性\n\treturn effect\n}\n// 对象属性收集他对应的effect函数 相当于2中的watcher\nconst targetMap = new WeakMap();\nexport function track(target, type, key){\n\t// activeEffect\n\tif(activeEffect === undefined) {\n\t\treturn;\n\t}\n\tlet depsMap = targetMap.get(target)\n\tif(!depsMap){\n\t\ttargetMap.set(target,(depsMap = new Map))\n\t}\n\tlet dep = depsMap.get(key)\n\tif(!dep){\n\t\tdepsMap.set(key,(dep = new Set))\n\t}\n\tif(!dep.has(activeEffect)){\n\t\tdep.add(activeEffect)\n\t\t// activeEffect.deps.push(dep)// 双向记录方便取值\n\t}\n\t// 这个dep的key就是object的属性如state.name中的name，value就是effect(fn) 中的fn，即是副作用activeEffect\n\tconsole.log(targetMap, key, target)\n\t// console.log(target,key,activeEffect)\n}\n\n// 属性对应的effect（数组，对象）\nexport function trigger(target, type, key?, newValue?, oldValue?) {\n\tconst depsMap = targetMap.get(target)\n\tif(!depsMap) return;\n\n\tconst effects = new Set() //对effect去重\n\t// 将所有要执行的effect存到一个新的set中最后一起执行\n\tconst add = (effectsToAdd) => {\n\t\tif(effectsToAdd){\n\t\t\teffectsToAdd.forEach(effect => effects.add(effect));\n\t\t\t// effectsToAdd.forEach(effect => effects());\n\t\t}\n\t}\n\n\t// 1.修改的是数组长度\n\tif(key === 'length' && isArray(target)){\n\t\t// 如果对应的长度，有新加入需要收集依赖\n\t\tdepsMap.forEach((dep, key) => {\n\t\t\tif(key === 'length' || key > newValue) { // 如果更改的长度小于收集的索引那这个索引也要触发effect跟新执行\n\t\t\t\tadd(dep)\n\t\t\t}\n\t\t})\n\t}else{\n\t\t//对象\n\t\tif(key !== undefined){ //这里肯定是修改\n\t\t\tadd(depsMap.get(key))\n\t\t}\n\t\t// 修改了数组中的某个索引\n\t\tswitch (type) {\n\t\t\tcase TriggerOrTyps.ADD: //添加一个索引就触发长度更新\n\t\t\t\tif(isArray(target) && isIntegerKey(key)){\n\t\t\t\t\tadd(depsMap.get('length'))\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t}\n\teffects.forEach((effect:any) => {\n\t\tif(effect.options.scheduler){\n\t\t\t// console.log('scheduler-----')\n\t\t\teffect.options.scheduler(effect)\n\t\t}else{\n\t\t\teffect()\n\t\t}\n\t})\n}","import { extend, hasChanged, hasOwn, isArray, isIntegerKey, isObject } from '@vue/shared/src'\nimport { readonly, reactive } from './reactive'\nimport { track, trigger } from './effect'\nimport { TrackOpTyps, TriggerOrTyps } from './operators'\n\nfunction createGetter(isReadonly = false, shallow = false) {// 拦截获取功能\n\treturn function get(target, key, receiver){\n\t\t// proxy + reflect\n\t\t// 后续Object上的方法 会迁移到Reflect ,之前的target[key] = value 方式设置值可能会失败，并不会报异常，也没有返回值标识\n\t\tconst res = Reflect.get(target, key, receiver)\n\n\t\tif(!isReadonly){\n\t\t\t// 依赖收集，数据变化时更新视图\n\t\t\tconsole.log('执行effect时会取值','收集effect')\n\t\t\ttrack(target, TrackOpTyps.GET, key)\n\t\t}\n\n\t\tif(shallow){\n\t\t\treturn res\n\t\t}\n\n\t\tif(isObject(res)){ //vue2 是一上来就递归，vue3是取值时才进行\n\t\t\treturn isReadonly ? readonly(res) : reactive(res)\n\t\t}\n\n\t\treturn res\n\t}\n}\n\nfunction createSetter(shallow = false) { // 拦截设置功能\n\treturn function get(target, key, value, receiver){\n\t\tconst oldValue = target[key];\n\t\tlet hadkey = isArray(target) && isIntegerKey(key) ? Number(key) < target.length : hasOwn(target, key)\n\t\tconst res = Reflect.set(target, key, value, receiver)\n\t\t// 数据更新时 通知对应属性的effect执行\n\t\tif(!hadkey){\n\t\t\t//增加\n\t\t\ttrigger(target, TriggerOrTyps.ADD, key, value)\n\t\t}else if(hasChanged(oldValue, value)){\n\t\t\t//修改\n\t\t\ttrigger(target, TriggerOrTyps.SET, key, value, oldValue)\n\t\t}\n\n\t\treturn res\n\t}\n}\n\nconst get = createGetter()\nconst shallowGet = createGetter(false, true)\nconst readonlyGet = createGetter(true)\nconst shallowReadonlyGet = createGetter(true, true)\n\nconst set = createSetter()\nconst shallowSet = createSetter(true)\n\nexport const mutableHandlers = {\n\tget,\n\tset\n}\n\nexport const shallowReactiveHandlers = {\n\tget:shallowGet,\n\tset:shallowSet\n}\n\nlet readonlyObj = {\n\tset:(target,key)=>{\n\t\tconsole.warn(`set on '${target}' key '${key}' falied`)\n\t}\n}\n\nexport const shallowReadonlyHandlers = extend({\n\tget:shallowReadonlyGet,\n},readonlyObj)\n\nexport const readonlyHandlers = extend({\n\tget:readonlyGet\n},readonlyObj)\n\n","import { isObject } from '@vue/shared/src'\n\nimport {\n\tmutableHandlers,\n\tshallowReactiveHandlers,\n\tshallowReadonlyHandlers,\n\treadonlyHandlers,\n} from './baseHandlers'\nexport function reactive(target){\n\treturn createReactiveObject(target, false, mutableHandlers)\n\n} \n\nexport function shallowReactive(target){\n\treturn createReactiveObject(target, false, shallowReactiveHandlers)\n\n}\nexport function shallowReadonly(target){\n\treturn createReactiveObject(target, true, shallowReadonlyHandlers)\n\n}\nexport function readonly(target){\n\treturn createReactiveObject(target, true, readonlyHandlers)\n\n}\nconst reactiveMap = new WeakMap() //存储的key只能是对象，会自动垃圾回收，不会造成内存泄漏\nconst readonlyMap = new WeakMap()\nexport function createReactiveObject(target, isReadonly, baseHandlers){\n\t// 如果target不是对象，不拦截，reactive这个api只能拦截对象类型\n\tif(!isObject(target)){\n\t\treturn target\n\t}\n\tconst proxyMap = isReadonly ? readonlyMap : reactiveMap\n\tconst existProxy = proxyMap.get(target)\n\tif(existProxy){\n\t\treturn existProxy\n\t}\n\tconst proxy = new Proxy(target, baseHandlers)\n\tproxyMap.set(target,proxy)\n\treturn proxy;\n}","import { isFunction } from './../../shared/src/index';\nimport { effect, track, trigger } from './effect';\nimport { TrackOpTyps, TriggerOrTyps } from './operators';\n\nclass ComputedRefImpl{\n\tpublic _dirty = true;\n\tpublic _value;\n\tpublic effect\n\tconstructor(public getter, public setter){\n\t\t// 计算属性会默认产生一个effect\n\t\tthis.effect = effect(getter,{\n\t\t\tlazy: true,\n\t\t\tscheduler:()=>{\n\t\t\t\tif(!this._dirty){\n\t\t\t\t\tthis._dirty = true\n\t\t\t\t\ttrigger(this, TriggerOrTyps.SET,'value')\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t}\n\n\tget value(){\n\t\tif(this._dirty){\n\t\t\tthis._value = this.effect() // 返回用户返回值\n\t\t\tthis._dirty = false\n\t\t}\n\t\t// 计算属性页要依赖收集\n\t\ttrack(this, TrackOpTyps.GET, 'value')\n\t\treturn this._value;\n\t}\n\t\n\tset value(newValue){\n\t\tthis.setter(newValue)\n\t}\n}\n\nexport function computed(getterOrOptions) {\n\tlet getter\n\tlet setter\n\n\tif(isFunction(getterOrOptions)){\n\t\tgetter = getterOrOptions\n\t\tsetter = () => {\n\t\t\tconsole.warn('computed value must be readonly')\n\t\t}\n\t}else{\n\t\tgetter = getterOrOptions.get\n\t\tsetter = getterOrOptions.set\n\t}\n\n\treturn new ComputedRefImpl(getter, setter)\n}"],"names":[],"mappings":"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"}